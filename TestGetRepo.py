from unittest import TestCase
from unittest.mock import patch, Mock

from GetRepo import get_user_info

class TestGetRepo(TestCase):
    @patch('GetRepo.get_repo_info')
    def test_get_repo_info(self):
        get_repo_info.return_value = 
        [
            {
                'id': 120936504,
                'name': 'test1',
                'full_name': 'ywang567/test1',
                'owner': {'login': 'ywang567',
                'id': 35854285,
                'avatar_url': 'https://avatars3.githubusercontent.com/u/35854285?v=4',
                'gravatar_id': '',
                'url': 'https://api.github.com/users/ywang567',
                'html_url': 'https://github.com/ywang567',
                'followers_url': 'https://api.github.com/users/ywang567/followers',
                'following_url': 'https://api.github.com/users/ywang567/following{/other_user}',
                'gists_url': 'https://api.github.com/users/ywang567/gists{/gist_id}',
                'starred_url': 'https://api.github.com/users/ywang567/starred{/owner}{/repo}',
                'subscriptions_url': 'https://api.github.com/users/ywang567/subscriptions',
                'organizations_url': 'https://api.github.com/users/ywang567/orgs',
                'repos_url': 'https://api.github.com/users/ywang567/repos',
                'events_url': 'https://api.github.com/users/ywang567/events{/privacy}',
                'received_events_url': 'https://api.github.com/users/ywang567/received_events',
                'type': 'User',
                'site_admin': False},
                'private': False,
                'html_url': 'https://github.com/ywang567/test1',
                'description': None,
                'fork': False,
                'url': 'https://api.github.com/repos/ywang567/test1',
                'forks_url': 'https://api.github.com/repos/ywang567/test1/forks',
                'keys_url': 'https://api.github.com/repos/ywang567/test1/keys{/key_id}',
                'collaborators_url': 'https://api.github.com/repos/ywang567/test1/collaborators{/collaborator}',
                'teams_url': 'https://api.github.com/repos/ywang567/test1/teams',
                'hooks_url': 'https://api.github.com/repos/ywang567/test1/hooks',
                'issue_events_url': 'https://api.github.com/repos/ywang567/test1/issues/events{/number}',
                'events_url': 'https://api.github.com/repos/ywang567/test1/events',
                'assignees_url': 'https://api.github.com/repos/ywang567/test1/assignees{/user}',
                'branches_url': 'https://api.github.com/repos/ywang567/test1/branches{/branch}',
                'tags_url': 'https://api.github.com/repos/ywang567/test1/tags',
                'blobs_url': 'https://api.github.com/repos/ywang567/test1/git/blobs{/sha}',
                'git_tags_url': 'https://api.github.com/repos/ywang567/test1/git/tags{/sha}',
                'git_refs_url': 'https://api.github.com/repos/ywang567/test1/git/refs{/sha}',
                'trees_url': 'https://api.github.com/repos/ywang567/test1/git/trees{/sha}',
                'statuses_url': 'https://api.github.com/repos/ywang567/test1/statuses/{sha}',
                'languages_url': 'https://api.github.com/repos/ywang567/test1/languages',
                'stargazers_url': 'https://api.github.com/repos/ywang567/test1/stargazers',
                'contributors_url': 'https://api.github.com/repos/ywang567/test1/contributors',
                'subscribers_url': 'https://api.github.com/repos/ywang567/test1/subscribers',
                'subscription_url': 'https://api.github.com/repos/ywang567/test1/subscription',
                'commits_url': 'https://api.github.com/repos/ywang567/test1/commits{/sha}',
                'git_commits_url': 'https://api.github.com/repos/ywang567/test1/git/commits{/sha}',
                'comments_url': 'https://api.github.com/repos/ywang567/test1/comments{/number}',
                'issue_comment_url': 'https://api.github.com/repos/ywang567/test1/issues/comments{/number}',
                'contents_url': 'https://api.github.com/repos/ywang567/test1/contents/{+path}',
                'compare_url': 'https://api.github.com/repos/ywang567/test1/compare/{base}...{head}',
                'merges_url': 'https://api.github.com/repos/ywang567/test1/merges',
                'archive_url': 'https://api.github.com/repos/ywang567/test1/{archive_format}{/ref}',
                'downloads_url': 'https://api.github.com/repos/ywang567/test1/downloads',
                'issues_url': 'https://api.github.com/repos/ywang567/test1/issues{/number}',
                'pulls_url': 'https://api.github.com/repos/ywang567/test1/pulls{/number}',
                'milestones_url': 'https://api.github.com/repos/ywang567/test1/milestones{/number}',
                'notifications_url': 'https://api.github.com/repos/ywang567/test1/notifications{?since,all,participating}',
                'labels_url': 'https://api.github.com/repos/ywang567/test1/labels{/name}',
                'releases_url': 'https://api.github.com/repos/ywang567/test1/releases{/id}',
                'deployments_url': 'https://api.github.com/repos/ywang567/test1/deployments',
                'created_at': '2018-02-09T17:42:05Z',
                'updated_at': '2018-02-09T17:43:01Z',
                'pushed_at': '2018-02-09T17:42:30Z',
                'git_url': 'git://github.com/ywang567/test1.git',
                'ssh_url': 'git@github.com:ywang567/test1.git',
                'clone_url': 'https://github.com/ywang567/test1.git',
                'svn_url': 'https://github.com/ywang567/test1',
                'homepage': None,
                'size': 1,
                'stargazers_count': 0,
                'watchers_count': 0,
                'language': None,
                'has_issues': True,
                'has_projects': True,
                'has_downloads': True,
                'has_wiki': True,
                'has_pages': False,
                'forks_count': 0,
                'mirror_url': None,
                'archived': False,
                'open_issues_count': 0,
                'license': None,
                'forks': 0,
                'open_issues': 0,
                'watchers': 0,
                'default_branch': 'master'
            }, 
            {
                'id': 120936567,
                'name': 'test2',
                'full_name': 'ywang567/test2',
                'owner': {'login': 'ywang567',
                'id': 35854285,
                'avatar_url': 'https://avatars3.githubusercontent.com/u/35854285?v=4',
                'gravatar_id': '',
                'url': 'https://api.github.com/users/ywang567',
                'html_url': 'https://github.com/ywang567',
                'followers_url': 'https://api.github.com/users/ywang567/followers',
                'following_url': 'https://api.github.com/users/ywang567/following{/other_user}',
                'gists_url': 'https://api.github.com/users/ywang567/gists{/gist_id}',
                'starred_url': 'https://api.github.com/users/ywang567/starred{/owner}{/repo}',
                'subscriptions_url': 'https://api.github.com/users/ywang567/subscriptions',
                'organizations_url': 'https://api.github.com/users/ywang567/orgs',
                'repos_url': 'https://api.github.com/users/ywang567/repos',
                'events_url': 'https://api.github.com/users/ywang567/events{/privacy}',
                'received_events_url': 'https://api.github.com/users/ywang567/received_events',
                'type': 'User',
                'site_admin': False},
                'private': False,
                'html_url': 'https://github.com/ywang567/test2',
                'description': None,
                'fork': False,
                'url': 'https://api.github.com/repos/ywang567/test2',
                'forks_url': 'https://api.github.com/repos/ywang567/test2/forks',
                'keys_url': 'https://api.github.com/repos/ywang567/test2/keys{/key_id}',
                'collaborators_url': 'https://api.github.com/repos/ywang567/test2/collaborators{/collaborator}',
                'teams_url': 'https://api.github.com/repos/ywang567/test2/teams',
                'hooks_url': 'https://api.github.com/repos/ywang567/test2/hooks',
                'issue_events_url': 'https://api.github.com/repos/ywang567/test2/issues/events{/number}',
                'events_url': 'https://api.github.com/repos/ywang567/test2/events',
                'assignees_url': 'https://api.github.com/repos/ywang567/test2/assignees{/user}',
                'branches_url': 'https://api.github.com/repos/ywang567/test2/branches{/branch}',
                'tags_url': 'https://api.github.com/repos/ywang567/test2/tags',
                'blobs_url': 'https://api.github.com/repos/ywang567/test2/git/blobs{/sha}',
                'git_tags_url': 'https://api.github.com/repos/ywang567/test2/git/tags{/sha}',
                'git_refs_url': 'https://api.github.com/repos/ywang567/test2/git/refs{/sha}',
                'trees_url': 'https://api.github.com/repos/ywang567/test2/git/trees{/sha}',
                'statuses_url': 'https://api.github.com/repos/ywang567/test2/statuses/{sha}',
                'languages_url': 'https://api.github.com/repos/ywang567/test2/languages',
                'stargazers_url': 'https://api.github.com/repos/ywang567/test2/stargazers',
                'contributors_url': 'https://api.github.com/repos/ywang567/test2/contributors',
                'subscribers_url': 'https://api.github.com/repos/ywang567/test2/subscribers',
                'subscription_url': 'https://api.github.com/repos/ywang567/test2/subscription',
                'commits_url': 'https://api.github.com/repos/ywang567/test2/commits{/sha}',
                'git_commits_url': 'https://api.github.com/repos/ywang567/test2/git/commits{/sha}',
                'comments_url': 'https://api.github.com/repos/ywang567/test2/comments{/number}',
                'issue_comment_url': 'https://api.github.com/repos/ywang567/test2/issues/comments{/number}',
                'contents_url': 'https://api.github.com/repos/ywang567/test2/contents/{+path}',
                'compare_url': 'https://api.github.com/repos/ywang567/test2/compare/{base}...{head}',
                'merges_url': 'https://api.github.com/repos/ywang567/test2/merges',
                'archive_url': 'https://api.github.com/repos/ywang567/test2/{archive_format}{/ref}',
                'downloads_url': 'https://api.github.com/repos/ywang567/test2/downloads',
                'issues_url': 'https://api.github.com/repos/ywang567/test2/issues{/number}',
                'pulls_url': 'https://api.github.com/repos/ywang567/test2/pulls{/number}',
                'milestones_url': 'https://api.github.com/repos/ywang567/test2/milestones{/number}',
                'notifications_url': 'https://api.github.com/repos/ywang567/test2/notifications{?since,all,participating}',
                'labels_url': 'https://api.github.com/repos/ywang567/test2/labels{/name}',
                'releases_url': 'https://api.github.com/repos/ywang567/test2/releases{/id}',
                'deployments_url': 'https://api.github.com/repos/ywang567/test2/deployments',
                'created_at': '2018-02-09T17:42:42Z',
                'updated_at': '2018-02-09T17:43:13Z',
                'pushed_at': '2018-02-09T17:43:24Z',
                'git_url': 'git://github.com/ywang567/test2.git',
                'ssh_url': 'git@github.com:ywang567/test2.git',
                'clone_url': 'https://github.com/ywang567/test2.git',
                'svn_url': 'https://github.com/ywang567/test2',
                'homepage': None,
                'size': 1,
                'stargazers_count': 0,
                'watchers_count': 0,
                'language': None,
                'has_issues': True,
                'has_projects': True,
                'has_downloads': True,
                'has_wiki': True,
                'has_pages': False,
                'forks_count': 0,
                'mirror_url': None,
                'archived': False,
                'open_issues_count': 0,
                'license': None,
                'forks': 0,
                'open_issues': 0,
                'watchers': 0,
                'default_branch': 'master'
            }, 
            {
                'id': 119112523,
                'name': 'Triangle567',
                'full_name': 'ywang567/Triangle567',
                'owner': {'login': 'ywang567',
                'id': 35854285,
                'avatar_url': 'https://avatars3.githubusercontent.com/u/35854285?v=4',
                'gravatar_id': '',
                'url': 'https://api.github.com/users/ywang567',
                'html_url': 'https://github.com/ywang567',
                'followers_url': 'https://api.github.com/users/ywang567/followers',
                'following_url': 'https://api.github.com/users/ywang567/following{/other_user}',
                'gists_url': 'https://api.github.com/users/ywang567/gists{/gist_id}',
                'starred_url': 'https://api.github.com/users/ywang567/starred{/owner}{/repo}',
                'subscriptions_url': 'https://api.github.com/users/ywang567/subscriptions',
                'organizations_url': 'https://api.github.com/users/ywang567/orgs',
                'repos_url': 'https://api.github.com/users/ywang567/repos',
                'events_url': 'https://api.github.com/users/ywang567/events{/privacy}',
                'received_events_url': 'https://api.github.com/users/ywang567/received_events',
                'type': 'User',
                'site_admin': False},
                'private': False,
                'html_url': 'https://github.com/ywang567/Triangle567',
                'description': None,
                'fork': False,
                'url': 'https://api.github.com/repos/ywang567/Triangle567',
                'forks_url': 'https://api.github.com/repos/ywang567/Triangle567/forks',
                'keys_url': 'https://api.github.com/repos/ywang567/Triangle567/keys{/key_id}',
                'collaborators_url': 'https://api.github.com/repos/ywang567/Triangle567/collaborators{/collaborator}',
                'teams_url': 'https://api.github.com/repos/ywang567/Triangle567/teams',
                'hooks_url': 'https://api.github.com/repos/ywang567/Triangle567/hooks',
                'issue_events_url': 'https://api.github.com/repos/ywang567/Triangle567/issues/events{/number}',
                'events_url': 'https://api.github.com/repos/ywang567/Triangle567/events',
                'assignees_url': 'https://api.github.com/repos/ywang567/Triangle567/assignees{/user}',
                'branches_url': 'https://api.github.com/repos/ywang567/Triangle567/branches{/branch}',
                'tags_url': 'https://api.github.com/repos/ywang567/Triangle567/tags',
                'blobs_url': 'https://api.github.com/repos/ywang567/Triangle567/git/blobs{/sha}',
                'git_tags_url': 'https://api.github.com/repos/ywang567/Triangle567/git/tags{/sha}',
                'git_refs_url': 'https://api.github.com/repos/ywang567/Triangle567/git/refs{/sha}',
                'trees_url': 'https://api.github.com/repos/ywang567/Triangle567/git/trees{/sha}',
                'statuses_url': 'https://api.github.com/repos/ywang567/Triangle567/statuses/{sha}',
                'languages_url': 'https://api.github.com/repos/ywang567/Triangle567/languages',
                'stargazers_url': 'https://api.github.com/repos/ywang567/Triangle567/stargazers',
                'contributors_url': 'https://api.github.com/repos/ywang567/Triangle567/contributors',
                'subscribers_url': 'https://api.github.com/repos/ywang567/Triangle567/subscribers',
                'subscription_url': 'https://api.github.com/repos/ywang567/Triangle567/subscription',
                'commits_url': 'https://api.github.com/repos/ywang567/Triangle567/commits{/sha}',
                'git_commits_url': 'https://api.github.com/repos/ywang567/Triangle567/git/commits{/sha}',
                'comments_url': 'https://api.github.com/repos/ywang567/Triangle567/comments{/number}',
                'issue_comment_url': 'https://api.github.com/repos/ywang567/Triangle567/issues/comments{/number}',
                'contents_url': 'https://api.github.com/repos/ywang567/Triangle567/contents/{+path}',
                'compare_url': 'https://api.github.com/repos/ywang567/Triangle567/compare/{base}...{head}',
                'merges_url': 'https://api.github.com/repos/ywang567/Triangle567/merges',
                'archive_url': 'https://api.github.com/repos/ywang567/Triangle567/{archive_format}{/ref}',
                'downloads_url': 'https://api.github.com/repos/ywang567/Triangle567/downloads',
                'issues_url': 'https://api.github.com/repos/ywang567/Triangle567/issues{/number}',
                'pulls_url': 'https://api.github.com/repos/ywang567/Triangle567/pulls{/number}',
                'milestones_url': 'https://api.github.com/repos/ywang567/Triangle567/milestones{/number}',
                'notifications_url': 'https://api.github.com/repos/ywang567/Triangle567/notifications{?since,all,participating}',
                'labels_url': 'https://api.github.com/repos/ywang567/Triangle567/labels{/name}',
                'releases_url': 'https://api.github.com/repos/ywang567/Triangle567/releases{/id}',
                'deployments_url': 'https://api.github.com/repos/ywang567/Triangle567/deployments',
                'created_at': '2018-01-26T23:01:37Z',
                'updated_at': '2018-01-26T23:01:37Z',
                'pushed_at': '2018-01-26T23:01:39Z',
                'git_url': 'git://github.com/ywang567/Triangle567.git',
                'ssh_url': 'git@github.com:ywang567/Triangle567.git',
                'clone_url': 'https://github.com/ywang567/Triangle567.git',
                'svn_url': 'https://github.com/ywang567/Triangle567',
                'homepage': None,
                'size': 0,
                'stargazers_count': 0,
                'watchers_count': 0,
                'language': None,
                'has_issues': True,
                'has_projects': True,
                'has_downloads': True,
                'has_wiki': True,
                'has_pages': False,
                'forks_count': 0,
                'mirror_url': None,
                'archived': False,
                'open_issues_count': 0,
                'license': None,
                'forks': 0,
                'open_issues': 0,
                'watchers': 0,
                'default_branch': 'master'
            }
        ]
    # @patch('GetRepo.ooooxxxxx')
    def test_get_user_info(self):
        # get_repo_info().return_value = 
        expected = ['User: ywang567',
                    'Repo: test1 Number of commits: 3',
                    'Repo: test2 Number of commits: 2',
                    'Repo: Triangle567 Number of commits: 1']
        self.assertEqual(get_user_info(), expected)


if __name__ == '__main__':
    unittest.main()

